<!DOCTYPE html>
<html>
<head>
	<title>SHU MATCH</title>
	<link rel="stylesheet" type="text/css" href="assets/css/desktop.css">
	<link rel="stylesheet" type="text/css" href="assets/css/tem.css">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script src="https://www.gstatic.com/firebasejs/5.8.1/firebase.js"></script>
	<script src="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.js"></script>
	<link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.css" />
</head>
<script type="text/javascript">
	var data = "Please sign in with a shu account";
	function setPage(page){
		if(page == "signup"){
			data = '<div class="container"> <div class="good-side"></div> <div class="bad-side"> <div style="text-align: center;" id="content"> <h2>Sign Up</h2> <section id="form"> <div class="wrapper"> <section class="columns"> <div class="column"> <h3>You</h3> <div id="basic-information"> <input id="age" class="age" type="number" name="age" placeholder="Age" value="18" min="18"> <span class="breakkk"></span> <input type="radio" id="gender1" name="gender" value="Male"> <label for="gender1">MALE</label><input type="radio" id="gender2" name="gender"value="Female"><label for="gender2">FEMALE</label> </div> <div id="interests"> <h3>I love a good party</h3> <div id="word1"> <input type="radio" id="w1" name="wd1" value="NEVER" > <label for="w1">NEVER</label> <input type="radio" id="w2" name="wd1"value="SOMETIMES"> <label for="w2">SOMETIMES</label> <input type="radio" id="w3" name="wd1"value="ALWAYS"> <label for="w3">ALWAYS</label> </div> <h3>I' +"'"+'m a social butterfly</h3> <div id="word2"> <input type="radio" id="w2w1" name="wd2" value="NEVER"> <label for="w2w1">NEVER</label><input type="radio" id="w2w2" name="wd2"value="SOMETIMES"> <label for="w2w2">SOMETIMES</label> <input type="radio" id="w2w3" name="wd2"value="Female"> <label for="w2w3">ALWAYS</label> </div> <h3>I like a lot of alone time</h3> <div id="word3"><input type="radio" id="w3w1" name="wd3" value="NEVER"><label for="w3w1">NEVER</label> <input type="radio" id="w3w2" name="wd3"value="SOMETIMES"> <label for="w3w2">SOMETIMES</label> <input type="radio" id="w3w3" name="wd3"value="ALWAYS"><label for="w3w3">ALWAYS</label> </div> </div> <div id="contact-information"> <p>Whats the best way to contact you</p><textarea id="contact" placeholder="Facebook, Twitter, instagram or snapchat.. maybe your number"></textarea> </div> <input id="termsandcond" type="checkbox" /><label for="termsandcond">I agree to the terms and conditions</label> </div> <div class="column"> <div id="lusts"> <h3>Ideal Partner</h3> <input id="theirage" class="age" type="number" name="agewnt" placeholder="Age" value="18" min="18"> <div id="genderiwant"> <h3>They should be</h3> <input type="radio" id="gnr1" name="gnderwnt" value="Male"> <label for="gnr1">MALE</label> <input type="radio" id="gnr2" name="gnderwnt"value="Female"> <label for="gnr2">FEMALE</label> <input type="radio" id="gnr3" name="gnderwnt"value="Either"><label for="gnr3">EITHER</label> </div> <h3>They should love a good party</h3><div id="word1"><input type="radio" id="tw1" name="twd1" value="NEVER"><label for="tw1">NEVER</label> <input type="radio" id="tw2" name="twd1"value="SOMETIMES"><label for="tw2">SOMETIMES</label> <input type="radio" id="tw3" name="twd1"value="ALWAYS"><label for="tw3">ALWAYS</label> </div> <h4>They should be a social butterfly</h4> <div id="word2"><input type="radio" id="tw2w1" name="twd2" value="NEVER"><label for="tw2w1">NEVER</label> <input type="radio" id="tw2w2" name="twd2"value="SOMETIMES"><label for="tw2w2">SOMETIMES</label><input type="radio" id="tw2w3" name="twd2"value="ALWAYS"><label for="tw2w3">ALWAYS</label></div> <h3>They should like a lot of alone time</h3><div id="word3"><input type="radio" id="tw3w1" name="twd3" value="NEVER"><label for="tw3w1">NEVER</label> <input type="radio" id="tw3w2" name="twd3"value="SOMETIMES"><label for="tw3w2">SOMETIMES</label><input type="radio" id="tw3w3" name="twd3"value="ALWAYS"><label for="tw3w3">ALWAYS</label></div> </div></div> </section> <footer> <div><button onclick="addUser()" id="submit" class="button">Submit</button> </div> </footer> </div> </section> </div> </div> </div>';

			document.getElementById("content").innerHTML  = data; 
		}else if(page == "panel"){
			data = '<div class="contr"> <div class="header"> <span class="label"><strong>SHUmatch</strong></span> <div class="menu"> <a href="#">Settings</a> <a href="#">Signout</a> </div> </div> <div class="main"> <div class="widget totals"> <div id="admin"></div> <h4 style="text-align: center;" class="widget-title"> <span>Welcome<span id="name"></span></span> <span data-tooltip="Clicking this button will generate all matches for users"></span> </h4> <img class="center" style="display: block; margin-right: auto; margin-left: auto; width: 45vh; height: 65vh"; src="assets/img/main.png"><div style="text-align: center;" class="widget-content"> <p>Information</p><p>Please ensure you have read through our terms and conditions before clicking to view your match</p <p id="match">Click the button to show your match</p><button id="matchButton"onclick="showMatch()">Show match</button></div> </div> <div class="widget half local"> <div style="text-align: center;" class="widget-content"> <p>Your Information</p> <div id="interests"> <h3>I love a good party</h3> <div id="word1"> <input type="radio" id="w1" name="wd1" value="NEVER" > <label for="w1">NEVER</label> <input type="radio" id="w2" name="wd1"value="SOMETIMES"> <label for="w2">SOMETIMES</label> <input type="radio" id="w3" name="wd1"value="ALWAYS"> <label for="w3">ALWAYS</label> </div> <h3>I'+"'"+'m a social butterfly</h3> <div id="word2"> <input type="radio" id="w2w1" name="wd2" value="NEVER"> <label for="w2w1">NEVER</label><input type="radio" id="w2w2" name="wd2"value="SOMETIMES"> <label for="w2w2">SOMETIMES</label> <input type="radio" id="w2w3" name="wd2"value="ALWAYS"> <label for="w2w3">ALWAYS</label> </div> <h3>I like a lot of alone time</h3> <div id="word3"><input type="radio" id="w3w1" name="wd3" value="NEVER"><label for="w3w1">NEVER</label> <input type="radio" id="w3w2" name="wd3"value="SOMETIMES"> <label for="w3w2">SOMETIMES</label> <input type="radio" id="w3w3" name="wd3"value="ALWAYS"><label for="w3w3">ALWAYS</label> </div> </div> <div id="contact-information"> <p>Whats the best way to contact you</p> <textarea id="contact" placeholder="Facebook, Twitter, instagram or snapchat.. maybe your number"></textarea> </div> <div style="clear:both;"></div> <div class="traverse text-center"> <a href="#" class="button">Edit</a> </div> </div> </div> <div class="widget half external"> <div style="text-align: center;" class="widget-content"> <p>What you want</p> <h3>They should love a good party</h3> <div id="word1"><input type="radio" id="tw1" name="twd1" value="NEVER"><label for="tw1">NEVER</label> <input type="radio" id="tw2" name="twd1"value="SOMETIMES"><label for="tw2">SOMETIMES</label> <input type="radio" id="tw3" name="twd1"value="ALWAYS"><label for="tw3">ALWAYS</label> </div> <h4>They should be a social butterfly</h4> <div id="word2"><input type="radio" id="tw2w1" name="twd2" value="NEVER"><label for="tw2w1">NEVER</label> <input type="radio" id="tw2w2" name="twd2"value="SOMETIMES"><label for="tw2w2">SOMETIMES</label><input type="radio" id="tw2w3" name="twd2"value="ALWAYS"><label for="tw2w3">ALWAYS</label></div> <h3>They should like a lot of alone time</h3> <div id="word3"><input type="radio" id="tw3w1" name="twd3" value="NEVER"><label for="tw3w1">NEVER</label> <input type="radio" id="tw3w2" name="twd3"value="SOMETIMES"><label for="tw3w2">SOMETIMES</label><input type="radio" id="tw3w3" name="twd3"value="ALWAYS"><label for="tw3w3">ALWAYS</label></div> <div style="clear:both;"></div> <div class="traverse text-center"> <a href="#" class="button">Edit</a> <a style="display: none;" href="#" class="button">Save</a> </div> </div> </div> <div id="admin2" class="widget invites"></div></div> </div>';
			document.getElementById("content").innerHTML  = data;
			setPanel(); 
		}else{
			document.getElementById("content").innerHTML  = data;
		}
	}

	function onLoad(){

		// check if user exists
		// check if email is valid
		setPage("signup");
	}
</script>
<script type="text/javascript">
  function setPanel(){
    var admin = true;
    if(admin){
      document.getElementById("admin").innerHTML = '<h4 class="widget-title"> <span>Generate matches for users</span> <span data-tooltip="Clicking this button will generate all matches for users"></span> <a onclick="Match()" href="#" class="tooltip-left button" data-tooltip="Generating can only be done once">Generate Matches</a> </h4>'; 
      document.getElementById("admin2").innerHTML = '<h4 class="widget-title"><span data-tooltip="Analytical data for your Review Invites.">Generate Analytics</span> <a href="#" class="button">Generate Analytics</a></h4> <div class="widget-content"> <p>Number of users: <strong class="bubble hoverable tooltip" data-tooltip="Total number of users">200</strong></p> <p>Male to Female ratio</p> <div class="width-graph"> <div class="five-star tooltip-bottom" data-tooltip="100 (50%) Male" style="width: 50%"></div> <div class="three-star tooltip-bottom" data-tooltip="100 (50%) Female" style="width: 50%"></div> </div> <p>Straight to gay ratio</p> <div class="width-graph"> <div class="five-star tooltip-bottom" data-tooltip="160 (80%) of users are Straight" style="width: 80%"></div> <div class="three-star tooltip-bottom" data-tooltip="40 (20%) of contacts did not leave a review." style="width: 20%"></div> </div> </div>'; 
    }
    var user = firebase.auth().currentUser; 
    var username = user.displayName.split(" ");
    document.getElementById("name").innerHTML = " "+ username[0].charAt(0).toUpperCase() + username[0].slice(1).toLowerCase() + " " + username[1].charAt(0).toUpperCase() + username[1].slice(1).toLowerCase(); 

    // sd
    var asEmail = user.email.split("@");


    // check if user exists

    var db = firebase.database();
	var ref1 = db.ref("users");
	var va = false; 
	ref1.on("value", (snapshot) => {
		var data = {};
		data = {};
		data["needs"] = {};
	  	snapshot.forEach((childSnapshot)=> {
	    	if(String(childSnapshot.key) == asEmail[0]){
	    		childSnapshot.forEach((childChildSnapshot)=> {
	    			if(childChildSnapshot.key == "needs"){
	    				childChildSnapshot.forEach((childChildDSnapshot)=> {
	    					data["needs"][childChildDSnapshot.key] = childChildDSnapshot.val();
	    				});
	    			}else{
	    				data[childChildSnapshot.key] =  childChildSnapshot.val();
	    			}
	    		});
	    	}
		});
		setUserPanel(data);
	  	data = {}; 
	});

	function setUserPanel(json){
		console.log(json);
		// document.getElementByName('wd1').value = json.options1;
		setSelected(json.option1, "w1","w2","w3");
		setSelected(json.option2, "w2w1","w2w2","w2w3");
		setSelected(json.option3, "w3w1","w3w2","w3w3");
		setSelected(json.needs.option1, "tw1","tw2","tw3");
		setSelected(json.needs.option1, "tw2w1","tw2w2","tw2w3");
		setSelected(json.needs.option1, "tw3w1","tw3w2","tw3w3");
		document.getElementById("contact").value = json.contact; 
	}


	function setSelected(value, nver1,smtim1,alwy1){
		if(value == "NEVER"){
			var radiobtn = document.getElementById(nver1);
			radiobtn.checked = true;
		}else if(value == "SOMETIMES"){
			var radiobtn = document.getElementById(smtim1);
			radiobtn.checked = true;
		}else if(value == "ALWAYS"){
			var radiobtn = document.getElementById(alwy1);
			radiobtn.checked = true;
		}
	}

  }
</script>
	<script src="scripts/js/firebase.js"></script>
	<script src="scripts/js/signup.js"></script>
	<script src="scripts/js/addUser.js"></script>
	<script src="scripts/js/match.js"></script>
	<script>
		console.log("what are you doing here!!!");
	</script>
<body onload="onLoad()" id="content">

</body>
</html>